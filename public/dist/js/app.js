var I=Object.create;var m=Object.defineProperty;var _=Object.getOwnPropertyDescriptor;var B=Object.getOwnPropertyNames;var O=Object.getPrototypeOf,P=Object.prototype.hasOwnProperty;var a=(t,e)=>m(t,"name",{value:e,configurable:!0});var g=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var H=(t,e,n,c)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of B(e))!P.call(t,o)&&o!==n&&m(t,o,{get:()=>e[o],enumerable:!(c=_(e,o))||c.enumerable});return t};var N=(t,e,n)=>(n=t!=null?I(O(t)):{},H(e||!t||!t.__esModule?m(n,"default",{value:t,enumerable:!0}):n,t));var v=g((J,b)=>{var y=a(function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")},"naiveFallback");b.exports=(function(){if(this)return this;if(typeof globalThis=="object"&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:a(function(){return this},"get"),configurable:!0})}catch{return y()}try{return __global__||y()}finally{delete Object.prototype.__global__}})()});var k=g((R,x)=>{x.exports={name:"websocket",description:"Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",keywords:["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],author:"Brian McKelvey <theturtle32@gmail.com> (https://github.com/theturtle32)",contributors:["I\xF1aki Baz Castillo <ibc@aliax.net> (http://dev.sipdoc.net)"],version:"1.0.35",repository:{type:"git",url:"https://github.com/theturtle32/WebSocket-Node.git"},homepage:"https://github.com/theturtle32/WebSocket-Node",engines:{node:">=4.0.0"},dependencies:{bufferutil:"^4.0.1",debug:"^2.2.0","es5-ext":"^0.10.63","typedarray-to-buffer":"^3.1.5","utf-8-validate":"^5.0.2",yaeti:"^0.0.6"},devDependencies:{"buffer-equal":"^1.0.0",gulp:"^4.0.2","gulp-jshint":"^2.0.4","jshint-stylish":"^2.2.1",jshint:"^2.0.0",tape:"^4.9.1"},config:{verbose:!1},scripts:{test:"tape test/unit/*.js",gulp:"gulp"},main:"index",directories:{lib:"./lib"},browser:"lib/browser.js",license:"Apache-2.0"}});var S=g((V,w)=>{w.exports=k().version});var E=g((z,q)=>{var u;if(typeof globalThis=="object")u=globalThis;else try{u=v()}catch{}finally{if(!u&&typeof window<"u"&&(u=window),!u)throw new Error("Could not determine global this")}var h=u.WebSocket||u.MozWebSocket,W=S();function T(t,e){var n;return e?n=new h(t,e):n=new h(t),n}a(T,"W3CWebSocket");h&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(t){Object.defineProperty(T,t,{get:a(function(){return h[t]},"get")})});q.exports={w3cwebsocket:h?T:null,version:W}});var U=N(E(),1);var Q=document.querySelector("#inputID"),G=document.querySelector("#logId"),X=document.querySelector(".loginBtn"),Y=document.querySelector(".subloginBtn"),Z=document.querySelector(".subsignupBtn"),i=document.querySelector(".Home"),ee=document.querySelector(".srchErmgs"),te=document.querySelector(".srchpgBtn"),ne=document.querySelector(".usrcl"),j=new WebSocket("ws://localhost:8000");j.addEventListener("open",()=>{console.log("we are connected")});j.addEventListener("message",t=>{console.log(t.data),G.textContent=t.data});i.addEventListener("click",function(t){t.target.matches(".loginBtn")&&fetch("/user/login",{method:"GET",headers:{"Content-Type":"application/json"}}).then(e=>e.text()).then(e=>{e&&(i.innerHTML=e)}).catch(e=>console.log(e))});i.addEventListener("click",function(t){if(t.target.matches(".subloginBtn")){let e=document.querySelector(".emailInput").value,n=document.querySelector(".passwordInput").value,c=document.querySelector(".erPlank"),o={email:e,password:n};console.log(o),fetch("/user/verificaftion",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then(s=>s.json()).then(s=>{s.erMgs?(c.innerHTML=s.erMgs,c.style.display="block",setTimeout(()=>{c.style.display="none"},3e3)):s.paswdMgs&&(c.innerHTML=s.paswdMgs,c.style.display="block",setTimeout(()=>{c.style.display="none"},6e3))}).catch(s=>console.log(s))}});i.addEventListener("click",t=>{t.target.matches(".siginingupBtn")&&fetch("/user/sgnpg",{method:"GET",headers:{"Content-Type":"application/json"}}).then(e=>e.text()).then(e=>{i.innerHTML=e}).catch(e=>console.log(e))});i.addEventListener("click",function(t){if(t.target.matches(".subsignupBtn")){let e=document.querySelector(".signupusernameInput").value,n=document.querySelector(".signupemailInput").value,c=document.querySelector(".signuppasswordInput").value,o=document.querySelector(".ersignupPlank"),s={username:e,email:n,password:c};console.log(s),fetch("/user/registration",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then(r=>r.json()).then(r=>{r.erMgs?(o.innerHTML=r.erMgs,o.style.display="block",setTimeout(()=>{o.style.display="none"},3e3)):r.paswdMgs?(o.innerHTML=r.paswdMgs,o.style.display="block",setTimeout(()=>{o.style.display="none"},6e3)):r.crtAccount===!0&&(console.log(r.usr,r.usrP+"herererer"),document.cookie=`usr=${r.usr};path=/`,document.cookie=`usrP=${r.usrP};path=/`)}).catch(r=>console.log(r))}});i.addEventListener("click",function(t){if(t.target.matches(".fndactBtn")){let e=document.querySelector(".fndactInput"),n=document.querySelector(".usrPnl"),o={srchVal:e.value};console.log("data"),fetch("/user/qryusr",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then(s=>s.json()).then(s=>{console.log(s),n.innerHTML="",s.forEach(r=>{let d=document.createElement("div");d.innerHTML=`
            <p class="usrcl"  data-prt="${r.userport}">${r.username}</p> 
            `;let p=d;n.appendChild(p)})}).catch(s=>console.log(s))}});i.addEventListener("click",function(t){if(t.target.matches(".usrcl")){let e=t.target;console.log("hello dataset:"+e.dataset.prt),fetch(`/user/qrysrchusr/${e.dataset.prt}`,{method:"GET",headers:{"Content-Type":"application/json"}}).then(n=>n.json()).then(n=>{if(n.acunt===!0){let c=n.nm;fetch("/user/srchusrcht",{method:"GET",headers:{"Content-Type":"application/json"}}).then(o=>o.text()).then(o=>{i.innerHTML=o;let s=document.querySelector(".nmcl");s.innerHTML=c,s.dataset.prt=e.dataset.prt}).catch(o=>console.log(o))}}).catch(n=>console.log(n))}});var $=new MutationObserver(t=>{t.forEach(e=>{e.addedNodes.forEach(n=>{let c=n.matches?.(".inptcl")?n:n.querySelector?.(".inptcl"),o=n.matches?.(".nmcl")?n:n.querySelector?.(".nmcl");c&&i.addEventListener("click",function(s){if(s.target.matches(".chtsbmtBtn")&&(console.log("dataset for nmcl: "+o.dataset.prt),console.log("message value for inptcl: "+c.value),{chtprt:o.dataset.prt,chtmgs:c.value})){let d=(p=>{let l=document.cookie.split("; ");for(let f=0;f<l.length;f++){let L=l[f],[C,M]=L.split("=");if(C===p)return decodeURIComponent(M)}return null})("usrP");if(d){let p={chtprt:o.dataset.prt,chtmgs:c.value,chtlgr:d};console.log(p),fetch("/mgs/crtmgs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)}).then(l=>l.text()).then(l=>{console.log(l)}).catch(l=>console.log(l))}}})})})});$.observe(i,{childList:!0,subtree:!0});i.addEventListener("click",function(t){t.target.matches(".srchpgBtn")&&fetch("/user/qrysrchpg",{method:"GET",headers:{"Content-Type":"application/json"}}).then(e=>e.text()).then(e=>{i.innerHTML=e}).catch(e=>console.log(e))});
//# sourceMappingURL=app.js.map
