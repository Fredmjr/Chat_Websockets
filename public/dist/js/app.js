var C=Object.create;var m=Object.defineProperty;var I=Object.getOwnPropertyDescriptor;var _=Object.getOwnPropertyNames;var B=Object.getPrototypeOf,O=Object.prototype.hasOwnProperty;var l=(t,e)=>m(t,"name",{value:e,configurable:!0});var g=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var P=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of _(e))!O.call(t,o)&&o!==n&&m(t,o,{get:()=>e[o],enumerable:!(r=I(e,o))||r.enumerable});return t};var H=(t,e,n)=>(n=t!=null?C(B(t)):{},P(e||!t||!t.__esModule?m(n,"default",{value:t,enumerable:!0}):n,t));var S=g((G,b)=>{var y=l(function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")},"naiveFallback");b.exports=(function(){if(this)return this;if(typeof globalThis=="object"&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:l(function(){return this},"get"),configurable:!0})}catch{return y()}try{return __global__||y()}finally{delete Object.prototype.__global__}})()});var T=g((J,x)=>{x.exports={name:"websocket",description:"Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",keywords:["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],author:"Brian McKelvey <theturtle32@gmail.com> (https://github.com/theturtle32)",contributors:["I\xF1aki Baz Castillo <ibc@aliax.net> (http://dev.sipdoc.net)"],version:"1.0.35",repository:{type:"git",url:"https://github.com/theturtle32/WebSocket-Node.git"},homepage:"https://github.com/theturtle32/WebSocket-Node",engines:{node:">=4.0.0"},dependencies:{bufferutil:"^4.0.1",debug:"^2.2.0","es5-ext":"^0.10.63","typedarray-to-buffer":"^3.1.5","utf-8-validate":"^5.0.2",yaeti:"^0.0.6"},devDependencies:{"buffer-equal":"^1.0.0",gulp:"^4.0.2","gulp-jshint":"^2.0.4","jshint-stylish":"^2.2.1",jshint:"^2.0.0",tape:"^4.9.1"},config:{verbose:!1},scripts:{test:"tape test/unit/*.js",gulp:"gulp"},main:"index",directories:{lib:"./lib"},browser:"lib/browser.js",license:"Apache-2.0"}});var k=g((R,v)=>{v.exports=T().version});var M=g((U,q)=>{var u;if(typeof globalThis=="object")u=globalThis;else try{u=S()}catch{}finally{if(!u&&typeof window<"u"&&(u=window),!u)throw new Error("Could not determine global this")}var h=u.WebSocket||u.MozWebSocket,N=k();function w(t,e){var n;return e?n=new h(t,e):n=new h(t),n}l(w,"W3CWebSocket");h&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(t){Object.defineProperty(w,t,{get:l(function(){return h[t]},"get")})});q.exports={w3cwebsocket:h?w:null,version:N}});var F=H(M(),1);var z=document.querySelector("#inputID"),K=document.querySelector("#logId"),Q=document.querySelector(".loginBtn"),X=document.querySelector(".subloginBtn"),Y=document.querySelector(".subsignupBtn"),i=document.querySelector(".Home"),Z=document.querySelector(".srchErmgs"),ee=document.querySelector(".srchpgBtn"),te=document.querySelector(".usrcl");i.addEventListener("click",function(t){t.target.matches(".loginBtn")&&fetch("/user/login",{method:"GET",headers:{"Content-Type":"application/json"}}).then(e=>e.text()).then(e=>{e&&(i.innerHTML=e)}).catch(e=>console.log(e))});i.addEventListener("click",function(t){if(t.target.matches(".subloginBtn")){let e=document.querySelector(".emailInput").value,n=document.querySelector(".passwordInput").value,r=document.querySelector(".erPlank"),o={email:e,password:n};console.log(o),fetch("/user/verificaftion",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then(s=>s.json()).then(s=>{s.erMgs?(r.innerHTML=s.erMgs,r.style.display="block",setTimeout(()=>{r.style.display="none"},3e3)):s.paswdMgs&&(r.innerHTML=s.paswdMgs,r.style.display="block",setTimeout(()=>{r.style.display="none"},6e3))}).catch(s=>console.log(s))}});i.addEventListener("click",t=>{t.target.matches(".siginingupBtn")&&fetch("/user/sgnpg",{method:"GET",headers:{"Content-Type":"application/json"}}).then(e=>e.text()).then(e=>{i.innerHTML=e}).catch(e=>console.log(e))});i.addEventListener("click",function(t){if(t.target.matches(".subsignupBtn")){let e=document.querySelector(".signupusernameInput").value,n=document.querySelector(".signupemailInput").value,r=document.querySelector(".signuppasswordInput").value,o=document.querySelector(".ersignupPlank"),s={username:e,email:n,password:r};console.log(s),fetch("/user/registration",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then(c=>c.json()).then(c=>{c.erMgs?(o.innerHTML=c.erMgs,o.style.display="block",setTimeout(()=>{o.style.display="none"},3e3)):c.paswdMgs?(o.innerHTML=c.paswdMgs,o.style.display="block",setTimeout(()=>{o.style.display="none"},6e3)):c.crtAccount===!0&&(console.log("Account created!: "+c.usr,c.usrP),document.cookie=`usr=${c.usr};path=/`,document.cookie=`usrP=${c.usrP};path=/`,c.redir===!0&&setTimeout(()=>{window.location.reload()},2e3))}).catch(c=>console.log(c))}});i.addEventListener("click",function(t){if(t.target.matches(".fndactBtn")){let e=document.querySelector(".fndactInput"),n=document.querySelector(".usrPnl"),o={srchVal:e.value};console.log("data"),fetch("/user/qryusr",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then(s=>s.json()).then(s=>{s.erMgs?(console.log(s.erMgs),n.innerHTML="",n.innerHTML=s.erMgs):(console.log(s),n.innerHTML="",s.forEach(c=>{let d=document.createElement("div");d.innerHTML=`
            <p class="usrcl"  data-prt="${c.userport}">${c.username}</p> 
            `;let p=d;n.appendChild(p)}))}).catch(s=>console.log(s))}});i.addEventListener("click",function(t){if(t.target.matches(".usrcl")){let e=t.target;console.log("hello dataset:"+e.dataset.prt),(async=l(()=>{let n=new Date(Date.now()+6048e5);l(()=>{document.cookie=`targtdusrprt=${encodeURIComponent(e.dataset.prt)}; Secure; SameSite=Strict; expires=${n.toUTCString()}; path=/`,console.log(`selected user with ${e.dataset.prt} stored key:targtdusrprt in cookie!`)},"see")()},"async"))(),fetch(`/user/qrysrchusr/${e.dataset.prt}`,{method:"GET",headers:{"Content-Type":"application/json"}}).then(n=>n.json()).then(n=>{if(n.acunt===!0){let r=n.nm;fetch("/user/srchusrcht",{method:"GET",headers:{"Content-Type":"application/json"}}).then(o=>o.text()).then(o=>{i.innerHTML=o;let s=document.querySelector(".nmcl");s.innerHTML=r,s.dataset.prt=e.dataset.prt}).catch(o=>console.log(o))}}).catch(n=>console.log(n))}});var W=new MutationObserver(t=>{t.forEach(e=>{e.addedNodes.forEach(n=>{let r=n.matches?.(".inptcl")?n:n.querySelector?.(".inptcl"),o=n.matches?.(".nmcl")?n:n.querySelector?.(".nmcl");r&&i.addEventListener("click",function(s){if(s.target.matches(".chtsbmtBtn")&&(console.log("dataset for nmcl: "+o.dataset.prt),console.log("message value for inptcl: "+r.value),{chtprt:o.dataset.prt,chtmgs:r.value})){let d=(p=>{let a=document.cookie.split("; ");for(let f=0;f<a.length;f++){let j=a[f],[E,L]=j.split("=");if(E===p)return decodeURIComponent(L)}return null})("usrP");if(d){let p={chtprt:o.dataset.prt,chtmgs:r.value,chtlgr:d};console.log(p),fetch("/mgs/crtmgs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)}).then(a=>a.text()).then(a=>{console.log(a)}).catch(a=>console.log(a))}}})})})});W.observe(i,{childList:!0,subtree:!0});i.addEventListener("click",function(t){t.target.matches(".srchpgBtn")&&fetch("/user/qrysrchpg",{method:"GET",headers:{"Content-Type":"application/json"}}).then(e=>e.text()).then(e=>{i.innerHTML=e}).catch(e=>console.log(e))});
//# sourceMappingURL=app.js.map
