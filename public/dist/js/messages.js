var $=Object.defineProperty;var m=(o,y)=>$(o,"name",{value:y,configurable:!0});(Fuc=m(()=>{let o=document.querySelector(".Home");new MutationObserver(g=>{g.forEach(f=>{f.addedNodes.forEach(n=>{(n.matches?.(".usrcl")?n:n.querySelector?.(".usrcl"))&&o.addEventListener("click",function(p){p.target.matches(".usrcl")&&(console.log("user button was clicked!"),new MutationObserver(v=>{v.forEach(b=>{b.addedNodes.forEach(s=>{let l=s.matches?.(".mnchtMgs")?s:s.querySelector?.(".mnchtMgs"),M=s.matches?.(".chtsbmtBtn")?s:s.querySelector?.(".chtsbmtBtn");if(l){console.log("we have message div"),l.innerHTML=`<div>
                  <img src="/assests/animations/loading.gif" width="50" alt="" />
                    </div>`,autockie=m(t=>{let r=document.cookie.split("; ");for(let e=0;e<r.length;e++){let c=r[e],[u,k]=c.split("=");if(u===t)return decodeURIComponent(k)}return null},"autockie");let i=autockie("targtdusrprt"),h=autockie("usrP"),d={lgrsur:h,sltdusr:i};console.log(`loger: ${h} & recepient: ${i}`);let a=document.querySelector(".Home");fetch("/mgs/prtsmgs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)}).then(t=>t.text()).then(t=>{if(t){console.log(t);let r=JSON.parse(t);Array.isArray(r)&&(l.innerHTML="",r.forEach(e=>{let c=document.createElement("div");c.innerHTML=`
                                  <div class="mgscrd" data-id="${e.id}" data-pstn="${e.from}">

                                  <div class="mgscrdCnt"><p class="singlemgscl">${e.message}</p>
                                  <span class="mgsftnote">From ${e.from} to ${e.to} -- ${new Date(e.createdAt).toLocaleString()}</span>
                                  
                                  </div>
                                  </div> `,l.appendChild(c)}))}}).catch(t=>console.log(t))}})})}).observe(o,{childList:!0,subtree:!0}))})})})}).observe(o,{childList:!0,subtree:!0})},"Fuc"))();(Cuc=m(()=>{let o=document.querySelector(".Home");new MutationObserver(g=>{g.forEach(f=>{f.addedNodes.forEach(n=>{(n.matches?.(".usrcl")?n:n.querySelector?.(".usrcl"))&&o.addEventListener("click",function(p){p.target.matches(".usrcl")&&(console.log("user button was clicked!"),new MutationObserver(v=>{v.forEach(b=>{b.addedNodes.forEach(s=>{let l=s.matches?.(".mnchtMgs")?s:s.querySelector?.(".mnchtMgs"),M=s.matches?.(".chtsbmtBtn")?s:s.querySelector?.(".chtsbmtBtn");M&&(console.log("we have message div nodechtsbmtBtn"),M.addEventListener("click",()=>{autockie=m(t=>{let r=document.cookie.split("; ");for(let e=0;e<r.length;e++){let c=r[e],[u,k]=c.split("=");if(u===t)return decodeURIComponent(k)}return null},"autockie");let i=autockie("targtdusrprt"),h=autockie("usrP"),d={lgrusr:h,sltdusr:i};console.log(`both loger: ${h} & recepient: ${i}`);let a=new WebSocket("ws://localhost:2001");a.addEventListener("open",()=>{console.log("Live!!!!"),a.send(JSON.stringify(d))}),a.addEventListener("message",t=>{let r=JSON.parse(t.data);Array.isArray(r)&&(l.innerHTML="",r.forEach(e=>{let c=document.createElement("div");c.innerHTML=`
                                  <div class="mgscrd" data-id="${e.id}" data-pstn="${e.from}">

                                  <div class="mgscrdCnt"><p class="singlemgscl">${e.message}</p>
                                  <span class="mgsftnote">From ${e.from} to ${e.to} -- ${new Date(e.createdAt).toLocaleString()}</span>
                                  
                                  </div>
                                  </div> `,l.appendChild(c),console.log("working on socket")}))})}))})})}).observe(o,{childList:!0,subtree:!0}))})})})}).observe(o,{childList:!0,subtree:!0})},"Cuc"))();(pstn=m(()=>{let o=document.querySelector(".Home");new MutationObserver(g=>{g.forEach(f=>{f.addedNodes.forEach(n=>{(n.matches?.(".usrcl")?n:n.querySelector?.(".usrcl"))&&o.addEventListener("click",function(p){p.target.matches(".usrcl")&&(console.log("user button was clicked!"),new MutationObserver(v=>{v.forEach(b=>{b.addedNodes.forEach(s=>{(s.matches?.(".mnchtMgs")?s:s.querySelector?.(".mnchtMgs"))&&new MutationObserver(i=>{i.forEach(h=>{h.addedNodes.forEach(d=>{let a=d.matches?.(".mgscrd")?d:d.querySelectorAll?.(".mgscrd");a&&a.forEach(t=>{console.log("cards !!!!!!!!!!!!!!!!!!!!!!!!"),console.log(t.dataset.pstn),prtckie=m(e=>{let c=document.cookie.split("; ");for(let u=0;u<c.length;u++){let k=c[u],[L,w]=k.split("=");if(L===e)return decodeURIComponent(w)}return null},"prtckie");let r=prtckie("usrP");console.log(r),t.dataset.pstn===r?(console.log("same"),t.style.display="flex",t.style.justifyContent="end"):t.dataset.pstn!==r&&(console.log("different"),t.style.display="flex",t.style.justifyContent="start"),console.log("ends.....")})})})}).observe(o,{childList:!0,subtree:!0})})})}).observe(o,{childList:!0,subtree:!0}))})})})}).observe(o,{childList:!0,subtree:!0})},"pstn"))();(autoSocket=m(()=>{let o=document.querySelector(".Home");new MutationObserver(g=>{g.forEach(f=>{f.addedNodes.forEach(n=>{(n.matches?.(".usrcl")?n:n.querySelector?.(".usrcl"))&&o.addEventListener("click",function(p){p.target.matches(".usrcl")&&new MutationObserver(v=>{v.forEach(b=>{b.addedNodes.forEach(s=>{let l=s.matches?.(".mnchtMgs")?s:s.querySelector?.(".mnchtMgs");if(s.matches?.(".chtsbmtBtn")?s:s.querySelector?.(".chtsbmtBtn")){autockie=m(t=>{let r=document.cookie.split("; ");for(let e=0;e<r.length;e++){let c=r[e],[u,k]=c.split("=");if(u===t)return decodeURIComponent(k)}return null},"autockie");let i=autockie("targtdusrprt"),d={lgrusr:autockie("usrP"),sltdusr:i},a=new WebSocket("ws://localhost:2001");a.addEventListener("open",()=>{a.send(JSON.stringify(d))}),a.addEventListener("message",t=>{let r=JSON.parse(t.data);Array.isArray(r)&&(l.innerHTML="",r.forEach(e=>{let c=document.createElement("div");c.innerHTML=`
                                  <div class="mgscrd" data-id="${e.id}" data-pstn="${e.from}">

                                  <div class="mgscrdCnt"><p class="singlemgscl">${e.message}</p>
                                  <span class="mgsftnote">From ${e.from} to ${e.to} -- ${new Date(e.createdAt).toLocaleString()}</span>
                                  
                                  </div>
                                  </div> `,l.appendChild(c)}))})}})})}).observe(o,{childList:!0,subtree:!0})})})})}).observe(o,{childList:!0,subtree:!0})},"autoSocket"))();
//# sourceMappingURL=messages.js.map
