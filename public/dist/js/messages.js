var $=Object.defineProperty;var h=(o,k)=>$(o,"name",{value:k,configurable:!0});(Fuc=h(()=>{let o=document.querySelector(".Home");new MutationObserver(g=>{g.forEach(f=>{f.addedNodes.forEach(n=>{(n.matches?.(".usrcl")?n:n.querySelector?.(".usrcl"))&&o.addEventListener("click",function(p){p.target.matches(".usrcl")&&(console.log("user button was clicked!"),new MutationObserver(v=>{v.forEach(b=>{b.addedNodes.forEach(s=>{let l=s.matches?.(".mnchtMgs")?s:s.querySelector?.(".mnchtMgs"),M=s.matches?.(".chtsbmtBtn")?s:s.querySelector?.(".chtsbmtBtn");if(l){console.log("we have message div"),l.innerHTML=`<div>
                  <img src="/assests/animations/loading.gif" width="50" alt="" />
                    </div>`,autockie=h(t=>{let r=document.cookie.split("; ");for(let e=0;e<r.length;e++){let c=r[e],[m,y]=c.split("=");if(m===t)return decodeURIComponent(y)}return null},"autockie");let i=autockie("targtdusrprt"),a=autockie("usrP"),d={lgrsur:a,sltdusr:i};console.log(`loger: ${a} & recepient: ${i}`);let u=document.querySelector(".Home");fetch("/mgs/prtsmgs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)}).then(t=>t.text()).then(t=>{if(t){console.log(t);let r=JSON.parse(t);Array.isArray(r)&&(l.innerHTML="",r.forEach(e=>{let c=document.createElement("div");c.innerHTML=`
                                  <div class="mgscrd" data-id="${e.id}" data-pstn="${e.from}">

                                  <div class="mgscrdCnt"><p class="singlemgscl">${e.message}</p>
                                  <span class="mgsftnote">From ${e.from} to ${e.to} -- ${new Date(e.createdAt).toLocaleString()}</span>
                                  
                                  </div>
                                  </div> `,l.appendChild(c)}))}}).catch(t=>console.log(t))}})})}).observe(o,{childList:!0,subtree:!0}))})})})}).observe(o,{childList:!0,subtree:!0})},"Fuc"))();(Cuc=h(()=>{let o=document.querySelector(".Home");new MutationObserver(g=>{g.forEach(f=>{f.addedNodes.forEach(n=>{(n.matches?.(".usrcl")?n:n.querySelector?.(".usrcl"))&&o.addEventListener("click",function(p){p.target.matches(".usrcl")&&(console.log("user button was clicked!"),new MutationObserver(v=>{v.forEach(b=>{b.addedNodes.forEach(s=>{let l=s.matches?.(".mnchtMgs")?s:s.querySelector?.(".mnchtMgs"),M=s.matches?.(".chtsbmtBtn")?s:s.querySelector?.(".chtsbmtBtn");M&&(console.log("we have message div nodechtsbmtBtn"),M.addEventListener("click",()=>{autockie=h(t=>{let r=document.cookie.split("; ");for(let e=0;e<r.length;e++){let c=r[e],[m,y]=c.split("=");if(m===t)return decodeURIComponent(y)}return null},"autockie");let i=autockie("targtdusrprt"),a=autockie("usrP"),d={lgrusr:a,sltdusr:i};console.log(`both loger: ${a} & recepient: ${i}`);let u=new WebSocket("ws://localhost:2001");u.addEventListener("open",()=>{console.log("Live!!!!"),u.send(JSON.stringify(d))}),u.addEventListener("message",t=>{let r=JSON.parse(t.data);Array.isArray(r)&&(l.innerHTML="",r.forEach(e=>{let c=document.createElement("div");c.innerHTML=`
                                  <div class="mgscrd" data-id="${e.id}" data-pstn="${e.from}">

                                  <div class="mgscrdCnt"><p class="singlemgscl">${e.message}</p>
                                  <span class="mgsftnote">From ${e.from} to ${e.to} -- ${new Date(e.createdAt).toLocaleString()}</span>
                                  
                                  </div>
                                  </div> `,l.appendChild(c)}))})}))})})}).observe(o,{childList:!0,subtree:!0}))})})})}).observe(o,{childList:!0,subtree:!0})},"Cuc"))();(pstn=h(()=>{let o=document.querySelector(".Home");new MutationObserver(g=>{g.forEach(f=>{f.addedNodes.forEach(n=>{(n.matches?.(".usrcl")?n:n.querySelector?.(".usrcl"))&&o.addEventListener("click",function(p){p.target.matches(".usrcl")&&(console.log("user button was clicked!"),new MutationObserver(v=>{v.forEach(b=>{b.addedNodes.forEach(s=>{(s.matches?.(".mnchtMgs")?s:s.querySelector?.(".mnchtMgs"))&&new MutationObserver(i=>{i.forEach(a=>{a.addedNodes.forEach(d=>{let u=d.matches?.(".mgscrd")?d:d.querySelectorAll?.(".mgscrd");u&&u.forEach(t=>{console.log("cards !!!!!!!!!!!!!!!!!!!!!!!!"),console.log(t.dataset.pstn),prtckie=h(e=>{let c=document.cookie.split("; ");for(let m=0;m<c.length;m++){let y=c[m],[S,w]=y.split("=");if(S===e)return decodeURIComponent(w)}return null},"prtckie");let r=prtckie("usrP");console.log(r),t.dataset.pstn===r?(console.log("same"),t.style.display="flex",t.style.justifyContent="end"):t.dataset.pstn!==r&&(console.log("different"),t.style.display="flex",t.style.justifyContent="start"),console.log("ends.....")})})})}).observe(o,{childList:!0,subtree:!0})})})}).observe(o,{childList:!0,subtree:!0}))})})})}).observe(o,{childList:!0,subtree:!0})},"pstn"))();
//# sourceMappingURL=messages.js.map
